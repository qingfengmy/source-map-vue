{"version":3,"file":"User-BOnlBQ6u.js","sources":["../../src/views/User.vue"],"sourcesContent":["<template>\n <el-form :model=\"form\" label-position=\"top\">\n      <el-form-item label=\"Promotion name\" :label-width=\"formLabelWidth\">\n        <el-input\n          v-model=\"form.stackFrame\"\n          autocomplete=\"off\"\n          :rows=\"5\"\n          type=\"textarea\"\n        />\n      </el-form-item>\n      <el-form-item label=\"Zones\" :label-width=\"formLabelWidth\">\n        <el-upload drag :before-upload=\"beforeUpload\">\n          <el-button type=\"primary\">Click to upload</el-button>\n        </el-upload>\n      </el-form-item>\n    </el-form>\n</template>\n\n<script setup lang=\"ts\">\nimport { reactive } from \"vue\";\nimport sourceMap from 'source-map-js'\n\nconst formLabelWidth = \"140px\";\n\nconst form = reactive({\n  stackFrame: \"\",\n  sourceMap: \"\",\n});\n\nconst beforeUpload = async (file: File) => {\n  console.log(file);\n  const reader = new FileReader();\n  reader.readAsText(file, \"utf-8\");\n  reader.onload = async (e) => {\n    console.log(e);\n    const sourceMap = JSON.parse(e.target?.result as string);\n    console.log('sourceMap', sourceMap)\n    const stackFrame = JSON.parse(form.stackFrame);\n    const source =  await getSource(sourceMap, stackFrame.lineNumber, stackFrame.columnNumber);\n    console.log('source', source);\n\n  };\n  return false;\n};\n\nconst getSource = async (code: any, line: any, column: any) => {\n  const consumer = await new sourceMap.SourceMapConsumer(code);\n  console.log('code', code)\n  console.log('line', line)\n  console.log('column', column)\n  const originalPosition = consumer.originalPositionFor({ line, column });\n  console.log('originalPosition', originalPosition)\n  const source = consumer.sourceContentFor(originalPosition.source);\n  return {\n    source,\n    column: originalPosition.column,\n    line: originalPosition.line,\n  }\n};\n</script>\n"],"names":["formLabelWidth","form","reactive","beforeUpload","file","reader","e","sourceMap","stackFrame","source","getSource","code","line","column","consumer","originalPosition","_createBlock","_component_el_form","_createVNode","_component_el_form_item","_component_el_input","_cache","$event","_component_el_upload","_component_el_button"],"mappings":"gGAsBA,MAAMA,EAAiB,oCAEvB,MAAMC,EAAOC,EAAS,CACpB,WAAY,GACZ,UAAW,EAAA,CACZ,EAEKC,EAAe,MAAOC,GAAe,CACzC,QAAQ,IAAIA,CAAI,EAChB,MAAMC,EAAS,IAAI,WACnB,OAAAA,EAAO,WAAWD,EAAM,OAAO,EAC/BC,EAAO,OAAS,MAAOC,GAAM,CAC3B,QAAQ,IAAIA,CAAC,EACb,MAAMC,EAAY,KAAK,MAAMD,EAAE,QAAQ,MAAgB,EACvD,QAAQ,IAAI,YAAaC,CAAS,EAClC,MAAMC,EAAa,KAAK,MAAMP,EAAK,UAAU,EACvCQ,EAAU,MAAMC,EAAUH,EAAWC,EAAW,WAAYA,EAAW,YAAY,EACzF,QAAQ,IAAI,SAAUC,CAAM,CAE9B,EACO,EACT,EAEMC,EAAY,MAAOC,EAAWC,EAAWC,IAAgB,CAC7D,MAAMC,EAAW,MAAM,IAAIP,EAAU,kBAAkBI,CAAI,EAC3D,QAAQ,IAAI,OAAQA,CAAI,EACxB,QAAQ,IAAI,OAAQC,CAAI,EACxB,QAAQ,IAAI,SAAUC,CAAM,EAC5B,MAAME,EAAmBD,EAAS,oBAAoB,CAAE,KAAAF,EAAM,OAAAC,EAAQ,EACtE,eAAQ,IAAI,mBAAoBE,CAAgB,EAEzC,CACL,OAFaD,EAAS,iBAAiBC,EAAiB,MAAM,EAG9D,OAAQA,EAAiB,OACzB,KAAMA,EAAiB,IAAA,CAE3B,sHAzDCC,EAcaC,EAAA,CAdH,MAAOhB,EAAM,iBAAe,KAAA,aACjC,IAOe,CAPfiB,EAOeC,EAAA,CAPD,MAAM,iBAAkB,cAAanB,CAAA,aACjD,IAKE,CALFkB,EAKEE,EAAA,CAJS,WAAAnB,EAAK,WAAL,sBAAAoB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAArB,EAAK,WAAUqB,GACxB,aAAa,MACZ,KAAM,EACP,KAAK,UAAA,iCAGTJ,EAIeC,EAAA,CAJD,MAAM,QAAS,cAAanB,CAAA,aACxC,IAEY,CAFZkB,EAEYK,EAAA,CAFD,KAAA,GAAM,gBAAepB,CAAA,aAC9B,IAAqD,CAArDe,EAAqDM,EAAA,CAA1C,KAAK,WAAS,WAAC,IAAe,CAAA,GAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAf,kBAAe,EAAA,CAAA"}