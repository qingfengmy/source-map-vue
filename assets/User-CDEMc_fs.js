import{_ as v,c as f,o as h,a as _,e as F,f as x,g as L,h as M,b as c,w as u,r as p,F as k,d as C,s as N}from"./index-m-aNjCGB.js";const V={name:"preview",props:{origin:Object},methods:{preLine(){console.log(this.origin,"origin");const n=this.origin.line,r=this.origin.source.split(`
`),a=r.length-1,d=n-3>0?n-3:0,m=n+5<a?n+3:a;let o=[];for(let e=d;e<=m;e++){const t=e+1+".   "+this.encodeHTML(r[e]);o.push(`<div class='code-line ${e+1==n?"heightlight":""}'>${t}</div>`)}return o.join("")},encodeHTML(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}}},y={class:"pre-code"},T={class:"error-detail"},$=["innerHTML"];function H(n,r,a,d,m,o){return h(),f("div",y,[_("div",T,[_("pre",{class:"error-code",innerHTML:o.preLine()},null,8,$)])])}const P=v(V,[["render",H]]),g="140px",B=F({__name:"User",setup(n){const r=x({stackFrame:"",sourceMap:""}),a=L({source:"",line:0,column:0});M(a,o=>{console.log(o,"newVal")});const d=async o=>{console.log(o);const e=new FileReader;return e.readAsText(o,"utf-8"),e.onload=async t=>{console.log(t);const l=JSON.parse(t.target?.result);console.log("sourceMap",l);const s=JSON.parse(r.stackFrame),i=await m(l,s.lineNumber,s.columnNumber);console.log("source",i),a.value=i},!1},m=async(o,e,t)=>{const l=await new N.SourceMapConsumer(o);console.log("code",o),console.log("line",e),console.log("column",t);const s=l.originalPositionFor({line:e,column:t});return console.log("originalPosition",s),{source:l.sourceContentFor(s.source),column:s.column,line:s.line}};return(o,e)=>{const t=p("el-input"),l=p("el-form-item"),s=p("el-button"),i=p("el-upload"),b=p("el-form");return h(),f(k,null,[c(b,{model:r,"label-position":"top"},{default:u(()=>[c(l,{label:"Promotion name","label-width":g},{default:u(()=>[c(t,{modelValue:r.stackFrame,"onUpdate:modelValue":e[0]||(e[0]=w=>r.stackFrame=w),autocomplete:"off",rows:5,type:"textarea"},null,8,["modelValue"])]),_:1}),c(l,{label:"Zones","label-width":g},{default:u(()=>[c(i,{drag:"","before-upload":d},{default:u(()=>[c(s,{type:"primary"},{default:u(()=>[...e[1]||(e[1]=[C("Click to upload",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),c(P,{origin:a.value},null,8,["origin"])],64)}}});export{B as default};
//# sourceMappingURL=User-CDEMc_fs.js.map
